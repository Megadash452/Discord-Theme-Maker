$top-bar-height: 22px // web: 0px

$server-list-width: 72px
$sidebar-width: 240px
    
=abs-pos($top, $left, $bottom:auto, $right:auto)
    position: absolute
    top: $top
    bottom: $bottom
    left: $left
    right: $right

body
    margin: 0
    width: 100vw
    
// * All colors can be changed by user

body.light
    color: #4f5660
    background-color: #e3e5e8
    
body.dark
    color: #b9bbbe
    background-color: #202225

    #home-btn
        color: #dcddde
        background-color: #36393f
        &:hover
            color: #fff
            background-color: #5865f2
        &:active, &.active
            color: #fff
            background-color: #5865f2

    #sidebar
        background-color: #2f3136
        .head
            background-color: #00000000
        .channels
            background-color: #00000000
            .dm-channel
                color: #8e9297
                background-color: transparent
                &:hover
                    color: #dcddde
                    background-color: #4f545c29
                &:active, &.active
                    color: #fff
                    background-color: #4f545c52
        .media-control
            background-color: #292b2f

    #search-dms
        color: #72767d
        background-color: #202225

    #main-content
        background-color: #36393f
        .head
            background-color: #00000000

    #guilds
        .guild-actions
            background-color: #36393f



#top-bar
    width: 100%
    height: #{$top-bar-height}
    *
        max-height: #{$top-bar-height}


#main-wrapper
    height: calc(100vh - #{$top-bar-height}) //
    display: flex

    
#guilds
    width: $server-list-width //
    height: 100%
    position: relative
    overflow: hidden

    > .scroller
        height: 100%
        width: 100%
        overflow-y: scroll
        overflow-x: hidden
        // TODO: options for user to put a scroller of their liking (cannot be larger than the margin in server icons)
        scrollbar-width: none //

    #home-btn, .guild-actions
        margin-top: 4px // web is 12px
        display: flex
        align-items: center
        justify-content: center
            

    #servers
        li, .item
            background: #00ff0088 // ! remove

    li, .item
        $icon-size: 48px // width & height
        $icon-spacing: 8px

        $border-rad: 50%
        $border-rad-hov: 15px // TODO: get accurate radius
        $border-rad-active: $border-rad-hov

        $side-margins: calc((#{$server-list-width} - #{$icon-size}) / 2)

        width: $icon-size //
        height: $icon-size //
        aspect-ratio: 1
        position: relative
        margin-left: $side-margins // 
        margin-right: auto //
        margin-bottom: $icon-spacing //
        border-radius: 50%
        cursor: pointer
        transition: border-radius 0.2s, background-color 0.15s ease-out, color 0.15s ease-out
        list-style-type: none
        // TODO: get accurate time for border-radius

        background: #ff000088 // ! remove // transparent

        svg
            overflow: visible

        &::before // pill
            --left: calc(-1 * (#{$server-list-width} - #{$icon-size}) / 2)

            content: ''
            background-color: #fff
            +abs-pos(50%, calc(var(--left) - 8px), auto, auto)
            transform: translateY(-50%)
            width: 8px // 
            height: 8px // unreads: 8px, hover: 20px, active: 40px
            border-radius: 0 4px 4px 0
            transition: height 0.2s, left 0.1s // TODO: get accurate time
        &:hover
            border-radius: $border-rad-hov
            &::before
                height: 20px
                left: calc(var(--left) - 4px)
        &.unreads::before
            left: calc(var(--left) - 4px)
        &:active, &.active
            border-radius: $border-rad-active
            &::before
                height: 40px
                left: calc(var(--left) - 4px)

    .guild-actions
        color: hsl(139, 47.3%, 43.9%)


    hr, .divider
        margin: 0 auto 8px auto
        border: none
        width: 32px //
        height: 2px
        border-radius: 1px
        background-color: #ffffff0f


    $new-width: 56px
    $new-height: 24px
    $new-margin: 8px
    &::before, &::after
        +abs-pos(-#{$new-height + $new-margin}, 0, auto, 0)
        // width: 3.5rem //
        // height: 1.5rem //
        max-height: $new-height //
        padding: 0.281rem 0 0.281rem 0
        margin: $new-margin
        border-radius: 50px
        z-index: 2

        content: 'NEW'
        opacity: 0.9
        background: #ed4245
        color: #fff
        font: 0.75rem "Helvetica Neue", Helvetica, sans-serif // actual font is ginto, but is proprietarial
        text-align: center
        
        font-weight: 600
        cursor: pointer
        // ! Vertically center using css method instead of padding
        
        --scale: 1 // * make user choose wether they want it to grow or to move // 0
        transition: transform 0.05s, top 0.05s, bottom 0.05s
        transform: scale(var(--scale, 1))
        transform-origin: top center

        &:hover
            opacity: 1
            background: yellow
    &::after
        top: auto
        bottom: -#{$new-height + $new-margin}
        transform-origin: bottom center
    &.new-above::before
        --scale: 1
        top: 0
    &.new-below::after
        --scale: 1
        bottom: 0



#app-base
    height: calc(100vh - #{$top-bar-height})
    width: calc(100vw - #{$server-list-width})
    display: flex

    $head-height: 48px //
    $media-ctrl-height: 52px //

    #sidebar
        width: $sidebar-width
        height: 100%
        border-radius: 8px 0 0 0 //
        overflow-y: hidden

        .head
            width: 100%
            height: $head-height
            display: flex
            align-items: center
            justify-content: center
            
            #search-dms
                width: 220px //
                height: 28px //
                border: none
                border-radius: 4px //
                font-family: Whitney, "Helvetica Neue", Helvetica, sans-serif // TODO: Whitney
                text-align: left //

        .channels
            width: 100%
            height: calc(100% - #{$head-height} - #{$media-ctrl-height})
            overflow-y: hidden

            $btn-side-margin: 8px //
            $btn-vertical-margin: 1px //
            $btn-height: 42px //

            .scroller
                height: 100%
                padding-top: 8px //
                overflow-x: visible
                // overflow-y: scroll

                .dm-channel
                    display: flex
                    align-items: center
                    // justify-content: start
                    width: calc(#{$sidebar-width} - #{$btn-side-margin} * 2 - 16px)
                    height: $btn-height
                    margin: $btn-vertical-margin $btn-side-margin
                    padding: 0 8px
                    border-radius: 4px //
                    text-decoration: none
                    font-family: Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                    font-size: 16px //
                    line-height: 20px

                    .avatar
                        width: 32px //
                        aspect-ratio: 1
                        margin-right: 12px //
                        &.wrapper
                            display: flex
                            align-items: center
                            justify-content: center
                            svg
                                width: 24px
                                height: 24px


        .media-control
            width: 100%
            height: $media-ctrl-height

    #main-content
        width: calc(100% - #{$sidebar-width})
        height: 100%

        .head
            width: 100%
            height: $head-height
        .chat
            width: 100%
            height: calc(100% - #{$head-height})

    &::before
        content: ''
        height: 1px
        display: block
        +abs-pos(calc(#{$head-height} + #{$top-bar-height} - 1px), $server-list-width, auto, 0)
        pointer-events: none
        box-shadow: 0 1px 0 #04040533, 0 1.5px 0 #0606070d, 0 2px 0 #0404050d
        
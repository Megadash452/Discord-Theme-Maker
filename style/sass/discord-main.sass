$top-bar-height: 22px // web: 0px

$server-list-width: 72px
$sidebar-width: 240px
$ping-color: #ed4245
    
=abs-pos($top, $left, $bottom:auto, $right:auto)
    position: absolute
    top: $top
    bottom: $bottom
    left: $left
    right: $right


// TODO: FONT: Whitney
// TODO: FONT: Ginto

body
    margin: 0
    width: 100vw
    height: 100vh
    
// * All colors can be changed by user

body.light
    color: #4f5660
    background-color: #e3e5e8

    #notice
        box-shadow: 0 1px 0 #0606071a, 0 1.5px 0 #06060706, 0 2px 0 #06060706
    
body.dark
    // --primary-col: 
    // --primary-bg: #36393f
    // --secondary-col:
    // --secondary-bg:
    // --thirtiary-col:
    // --thirtiary-bg:
    --main-col: #b9bbbe
    --main-bg: #202225

    color: var(--main-col)
    background-color: var(--main-bg)

    hr.vertical, hr.horizontal
        background-color: #ffffff0f

    #top-bar
        .logo
            color: #72767d
        button
            color: #b9bbbe
            background-color: #0000
            &:hover
                color: #dcddde
                background-color: #4f545c29
            &:active
                color: #fff
                background-color: #4f545c3d
                &.close-app
                    color: #dcddde
                
    #guilds
        li.folder, .item.folder
            background: #0000
            >svg .wrapper
                background-color: #2f3136
                &:hover
                    background-color: #36393f
            &.opened
                background: #2f3136
                .icons
                    background-color: #0000 !important
        .item.no-img, #home-btn
            > svg .wrapper
                color: #dcddde
                background-color: #36393f
            &:hover > svg .wrapper
                color: #fff
                background-color: #5865f2
            &:active > svg .wrapper, &.active > svg .wrapper
                color: #fff
                background-color: #5865f2
        .guild-actions
            background-color: #36393f

    #notice
        box-shadow: 0 1px 0 #04040533, 0 1.5px 0 #0606070d,0 2px 0 #0404050d           

    #sidebar
        .head
            background-color: #2f3136
        .channels
            color: #8e9297
            background-color: #2f3136
            .scroller
                scrollbar-color: transparent transparent
                &:hover
                    scrollbar-color: #202225 transparent
            h2.category
                color: inherit
                background-color: #0000
                &:hover
                    color: #dcddde
                    background-color: #0000
                &:active
                    color: #dcddde
                    background-color: #0000
            .dm-channel, .channel
                color: inherit
                background-color: #0000
                &:hover
                    color: #dcddde
                    background-color: #4f545c29
                &:active, &.active
                    color: #fff
                    background-color: #4f545c52
                &.muted
                    color: #4f545c
                    background-color: #0000
                    &:hover
                        color: #dcddde
                        background-color: #4f545c29
                    &:active, &.active
                        color: #fff
                        background-color: #4f545c52
                    .avatar
                        opacity: 0.3
                .avatar
                    color: inherit
                    background-color: #0000
            button
                color: #8e9297
                background-color: #0000
                &:hover
                    color: #dcddde
                    background-color: #0000
                &:active
                    color: #dcddde
                    background-color: #0000

        .media-control
            color: #dcddde
            background-color: #292b2f
            .vc-control
                color: #fff
                background-color: #0000
                border-bottom-color: #ffffff0f
                .connection
                    color: inherit
                    background-color: #0000
                    .subtitle
                        color: #b9bbbe
                        background-color: #0000
                    button.disconnect
                        color: #b9bbbe
                        background-color: #0000
                        &:hover
                            color: #dcddde
                            background-color: #4f545c52
                        &:active
                            color: #dcddde
                            background-color: #4f545c52
                .actions button
                    color: #fff
                    background-color: #36393f
                    &:hover
                        color: #fff
                        background-color: #2f3136
                    &:active
                        color: #fff
                        background-color: #2f3136
            .content
                .title
                    color: #fff
                .subtitle
                    color: #b9bbbe
                button
                    color: #b9bbbe
                    background-color: #0000
                    &:hover
                        color: #dcddde
                        background-color: #4f545c52
                    &:active
                        color: #dcddde
                        background-color: #4f545c52

    .search-bar
        color: #72767d
        background-color: #202225
        &:hover
            color: #72767d
            background-color: #202225
        &:active
            color: #72767d
            background-color: #202225

    #main-content
        .head
            background-color: #36393f
            .info
                &::after
                    background: linear-gradient(90deg, #36393f00 0, #36393f)
                .header
                    color: #fff
                    svg
                        color: #72767d
                .tab-btns button
                    color: #b9bbbe
                    background-color: #0000 
                    &:hover
                        color: #dcddde
                        background-color: #4f545c29
                    &:active
                        color: #fff
                        background-color: #4f545c3d
                    &.active
                        color: #fff
                        background-color: #4f545c52
                    &.active:hover
                        background-color: #4f545c29
                #add-friend-btn.active
                    background-color: #0000 !important
                    &:hover
                        background-color: #4f545c29 !important
                    &:active
                        background-color: #4f545c3d !important
            .tools
                button
                    color: #b9bbbe
                    &:hover
                        color: #dcddde
                    &:active, &.active
                        color: #dcddde
        .content
            scroll-color: #202225 #2f3136
            .chat
                background-color: #36393f
                &[name="add-friend"]
                    header
                        border-color: #ffffff0f
                        .title
                            color: #fff
                        .subtitle
                            color: #b9bbbe
                        form
                            background-color: #0000001a
                            border-color: #0000004d
                            input
                                color: #dcddde
                                background-color: transparent
                                &::placeholder
                                    color: #72767d
                            .input-overlay
                                color: #4f545c
                            button
                                color: #fff
                                background-color: #5865f2
                                &:hover
                                    background-color: #4752c4
                                &:active
                                    background-color: #3c45a5
                .scroller
                    &.empty
                        .subtitle
                            color: #72767d
                        button
                            color: #fff
                            background-color: #5865f2
                            &:hover
                                background-color: #4752c4
                            &:active
                                background-color: #3c45a5
                    .header
                        color: #b9bbbe
                    li.item
                        background-color: #0000
                        border-color: #ffffff0f
                        &:hover
                            background-color: #4f545c29
                            .actions button
                                background-color: #202225
                        &:hover, &:hover + li.item
                            border-color: #0000
                        .username
                            color: #fff
                        .tag
                            color: #b9bbbe
                        .subtitle
                            color: #b9bbbe
                        .actions button
                            color: #b9bbbe
                            background-color: #2f3136
                            &:hover
                                color: #dcddde
                            &:active
                                color: #fff
                                background-color: #4f545c3d
            #active-now
                background-color: #36393f
                .scroller
                    scrollbar-color: #202225 #0000
                    border-color: #ffffff0f
                    .header
                        color: #fff
                    li.item
                        background-color: #2f3136
                        border-color: rgba(255, 255, 255, 0.06)
                        &:hover
                            background-color: #18191c
                        &.empty
                            background-color: #0000
                            .title
                                color: #fff
                            .subtitle
                                color: #b9bbbe
                        header
                            .title
                                color: #dcddde
                            .subtitle
                                color: #b9bbbe
                        .body
                            background-color: #36393f
                            .title
                                color: #dcddde
                            .subtitle, .time-elapsed
                                color: #dcddde
                            .server .badge-wrapper
                                background-color: #18191c
            #members-sidebar
                background-color: #2f3136


    .tooltip, .tooltip::before
        color: #dcddde
        background-color: #18191c
        border-color: #18191c


button, a
    &[data-tooltip]::after
        font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
        font-weight: 500


hr.vertical
    width: 1px
    height: 100%
    border: none
    margin: 8px
    box-sizing: border-box
    outline: 0

.badge
    width: 16px
    height: 16px
    display: flex
    align-items: center
    justify-content: center
    border-radius: 8px
    color: #fff
    background: $ping-color
    font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
    font-weight: 600
    line-height: 16px
    text-align: center
    box-sizing: border-box
    &.width-2, &.2
        width: 22px
    &.width-3, &.3
        width: 30px

.avatar
    width: 32px //
    height: 32px //
    aspect-ratio: 1
    position: relative
    border-radius: 50%
    img
        width: 100%
        height: 100%
        object-fit: cover
    *
        max-width: 100%
        max-height: 100%


#top-bar
    width: 100%
    height: #{$top-bar-height}
    display: flex
    flex-direction: row-reverse
    align-items: stretch
    justify-content: flex-start
    pointer-events: none
    .logo
        padding: 4px 9px 3px
        +abs-pos(0, 0, auto, auto)
    button
        width: 28px
        height: $top-bar-height
        display: flex
        align-items: center
        justify-content: center
        position: relative
        cursor: pointer
        pointer-events: auto
        &.close-app:hover
            background-color: #ed4245 !important

    *
        max-height: #{$top-bar-height}


#main-wrapper
    height: calc(100vh - #{$top-bar-height}) //
    display: flex

    
#guilds
    width: $server-list-width
    height: 100%
    position: relative
    overflow: hidden

    > .scroller
        width: 100%
        height: 100%
        display: flex
        flex-direction: column
        align-items: center
        overflow-y: scroll
        overflow-x: hidden
        // TODO: options for user to put a scroller of their liking (cannot be larger than the margin in server icons)
        scrollbar-width: none //

    #home-btn
        margin-top: 4px // web is 12px
        > svg svg
            padding-top: 14px

    li, .item
        $icon-size: 48px // width & height
        $icon-spacing: 8px

        $border-rad: 50%
        $border-rad-hov: 16px
        $border-rad-active: $border-rad-hov

        // TODO: transitions on height and position (top, left etc..) do not work

        width: $icon-size
        height: $icon-size
        aspect-ratio: 1
        flex: 0 0 auto
        position: relative
        margin: 0 0 $icon-spacing 0
        list-style-type: none
        transition: background-color .15s ease-out, border-radius 0.2s ease-out, height 0.2s // border-rad:0.15s // Height doenst work // TODO: get accurate time
        user-select: none
        &.folder
            border-radius: $border-rad-hov $border-rad-hov #{$icon-size / 2} #{$icon-size / 2}
            cursor: default
            $wrapper-pading: 4px
            &:active::before
                    height: 20px
                    left: calc(var(--left) - 4px)

            .folder-icon-wrapper, .icons-wrapper
                width: calc(#{$icon-size} - #{$wrapper-pading} * 2)
                height: calc(#{$icon-size} - #{$wrapper-pading} * 2)
                position: absolute
                transition: top 0.25s // TODO: get accurate time

            .folder-icon-wrapper
                display: flex
                align-items: center
                justify-content: center
                .folder-icon
                    margin: 0
            
            &.opened
                height: auto
                &::before
                    height: 8px
                    left: calc(var(--left) - 8px)
                > svg foreignObject
                    mask: url(#)
                .icons
                    // padding: 0
                    .folder-icon-wrapper
                        top: $wrapper-pading
                    .icons-wrapper
                        top: calc(#{$icon-size} + 1px)
                .guilds
                    height: auto
                > .badge
                    opacity: 0
                    &.ping, &.badge.lower
                        top: $icon-size
                        left: $icon-size
                        bottom: auto
                        right: auto
                    &.upper
                        top: auto
                        left: auto
                        bottom: $icon-size
                        right: $icon-size
            &.collapsed
                .folder-icon-wrapper
                    top: calc(-#{$icon-size} + #{$wrapper-pading} * 2)
                .icons-wrapper
                    top: $wrapper-pading
                .guilds
                    height: 0

            > svg
                border-radius: $border-rad-hov
            > svg .wrapper, .icons
                width: 100%
                height: $icon-size
                // border-radius: $border-rad-hov
                transition: background .15s ease-out
                cursor: pointer
                .icons
                    position: relative
                    padding: $wrapper-pading
                    box-sizing: border-box
                    overflow: hidden
                    .icons-wrapper
                        display: grid
                        grid-template: 1fr 1fr/1fr 1fr
                        align-items: center
                        justify-items: center
                        .icon
                            width: 16px
                            height: 16px
                            aspect-ratio: 1
                            position: static
                            border-radius: 50%
                            overflow: hidden
            .guilds
                width: $server-list-width
                display: flex
                flex-direction: column
                align-items: center
                justify-content: flex-start
                position: relative
                left: calc(-1 * (#{$server-list-width} - #{$icon-size}) / 2)
                margin: 0
                padding: 0
                overflow: hidden
                transition: height 0.25s // DOES NOT WORK // TODO: get accurate time
                li, .item
                    &:first-child
                        margin: $icon-spacing 0 $icon-spacing 0
                    &:last-child
                        margin: 0

        > svg
            width: $icon-size
            aspect-ratio: 1
            border-radius: $border-rad
            overflow: hidden
            cursor: pointer
            transition: border-radius 0.2s ease-out, background-color 0.15s ease-out, color 0.15s ease-out
            .wrapper
                width: 100%
                height: 100%
            svg
                display: block
                margin-left: auto
                margin-right: auto

        &::before // pill
            content: ''
            width: 8px // 
            height: 8px // unreads: 8px, hover: 20px, active: 40px
            +abs-pos(calc(#{$icon-size} / 2), calc(var(--left) - 8px), auto, auto)
            --left: calc(-1 * (#{$server-list-width} - #{$icon-size}) / 2)
            background-color: #fff
            transform: translateY(-50%)
            border-radius: 0 4px 4px 0
            transition: height 0.2s, left 0.1s // ? TODO: get accurate time???
        &:hover
            > svg, &.guild-actions
                border-radius: $border-rad-hov
            &::before
                height: 20px
                left: calc(var(--left) - 4px)
        &.unreads::before, &.unread::before
            left: calc(var(--left) - 4px)
        &:active, &.active
            > svg, &.guild-actions
                border-radius: $border-rad-active
            &::before
                height: 40px
                left: calc(var(--left) - 4px)
        &:active
            top: 1px
            &.folder
                top: auto
                &::before
                    top: 50%
            &::before
                top: calc(50% - 1px)
        
        &.guild-actions
            display: flex
            align-items: center
            justify-content: center
            border-radius: $border-rad
            cursor: pointer
            color: #3ba55d
            &:hover, &:active, &.active
                color: #fff
                background-color: #3ba55d

        &.no-img .wrapper // * (childWrapper-anI2G9 acronym-2mOFsV) inside svg foreignObject when Compiling
            font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
            font-weight: 500
            line-height: 1.2em
            white-space: nowrap
            display: flex
            align-items: center
            justify-content: center

        .badge
            +abs-pos(auto, auto, 50%, 0)
            transition: all 0.25s // ! TODO: transition doesnt work // TODO: get accurate time
            pointer-events: none
            opacity: 1
            // padding-right: 1px
            &.upper
                top: 0
                bottom: auto
                background: #3ba55d
            &.lower
                top: auto
                bottom: 0
                background: $ping-color

    hr, .divider
        width: 32px //
        height: 2px
        flex: 0 0 2px
        border: none
        margin: 0 auto 8px auto
        border-radius: 1px
        background-color: #ffffff0f


    $new-width: 56px
    $new-height: 24px
    $new-margin: 8px
    &::before, &::after
        +abs-pos(-#{$new-height + $new-margin}, 0, auto, 0)
        // width: 3.5rem //
        // height: 1.5rem //
        max-height: $new-height //
        padding: 0.281rem 0 0.281rem 0
        margin: $new-margin
        border-radius: 50px
        z-index: 2

        content: 'NEW'
        opacity: 0.9
        background: $ping-color
        color: #fff //
        font: 0.75rem Ginto, "Helvetica Neue", Helvetica, sans-serif // ginto is proprietarial
        text-align: center
        
        font-weight: 600
        cursor: pointer
        // ! Vertically center using css method instead of padding
        
        --scale: 1 // * make user choose wether they want it to grow or to move // 0
        transition: transform 0.05s, top 0.05s, bottom 0.05s
        transform: scale(var(--scale, 1))
        transform-origin: top center

        &:hover
            opacity: 1
            background: yellow
    &::after
        top: auto
        bottom: -#{$new-height + $new-margin}
        transform-origin: bottom center
    &.new-above::before
        --scale: 1
        top: 0
    &.new-below::after
        --scale: 1
        bottom: 0

button
    background: transparent
    border: none
    padding: 0
    margin: 0
    cursor: pointer
    box-sizing: border-box


#app-base
    height: calc(100vh - #{$top-bar-height})
    width: calc(100vw - #{$server-list-width})
    flex-grow: 1
    position: relative
    display: flex
    flex-direction: column
    overflow: hidden


    $head-height: 48px //
    $media-ctrl-height: 52px //
    $sidebad-border-rad: 8px

    h1, h2, h3, p
        margin: 0

    // &::before
    //     content: ''
    //     height: 1px
    //     z-index: 3
    //     display: block
    //     +abs-pos(calc(#{$head-height} + #{$top-bar-height} - 1px), $server-list-width, auto, 0)
    //     pointer-events: none
    //     box-shadow: 0 1px 0 #04040533, 0 1.5px 0 #0606070d, 0 2px 0 #0404050d

    &:has(#notice:not(.hidden))
        #sidebar
            border-radius: 0 // TODO: MIGHT NOT WORK

    > .base-wrapper
        min-width: 0
        min-height: 0
        flex: 1 1 auto
        position: relative
        display: flex
        align-items: stretch
        justify-content: flex-start
        &::before
            content: ''
            height: 1px
            z-index: 3
            display: block
            +abs-pos(calc(#{$head-height} - 1px), 0, auto, 0)
            pointer-events: none
            box-shadow: 0 1px 0 #04040533, 0 1.5px 0 #0606070d, 0 2px 0 #0404050d // TODO: put in theme colors???

    #notice
        position: relative
        border-radius: $sidebad-border-rad 0 0 0
        padding: 0 28px 0 4px
        // z-index: 101
        color: #fff
        background-color: #f26522 
        font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
        font-weight: 500
        line-height: 36px
        text-align: center
        button.close
            width: 36px
            height: 36px
            +abs-pos(0, auto, auto, 0)
            background: url("res/imgs/close.svg") no-repeat // from discord // TODO: img does not load
            background-position: 50% 55%
            background-size: 10px 10px
            opacity: .5
            color: inherit
            transition: opacity .2s

    #sidebar
        width: $sidebar-width
        height: 100%
        flex: 0 0 auto
        border-radius: $sidebad-border-rad 0 0 0
        overflow-y: hidden
        display: flex
        flex-direction: column

        .head
            width: 100%
            height: $head-height
            display: flex
            flex: 0 0 auto
            align-items: center
            justify-content: center
            
            #search-dms
                width: 220px //
                height: 28px //
                border: none
                border-radius: 4px //
                padding: 1px 6px
                font: 14px Whitney, "Helvetica Neue", Helvetica, sans-serif
                font-weight: 500
                line-height: 24px
                text-align: left //
                cursor: pointer

        .channels
            width: 100%
            // height: calc(100% - #{$head-height} - #{$media-ctrl-height})
            flex: 1 1 auto
            position: relative
            overflow-y: hidden
            user-select: none

            $btn-side-margin: 8px //
            $btn-vertical-margin: 1px //
            $btn-height: 42px //

            .scroller
                height: 100%
                padding-top: 8px //
                padding-right: 8px
                position: relative
                overflow-x: visible
                overflow-y: auto
                scrollbar-width: thin
                transition: scrollbar-color 0.15s
                &:hover
                    scrollbar-color: #202225 transparent

                .category
                    height: 18px
                    width: calc(#{$sidebar-width} - #{$btn-side-margin} * 2 - 18px)
                    margin: 18px 8px 4px 18px
                    border-radius: 4px
                    box-sizing: border-box
                    font: 12px Ginto, "Helvetica Neue", Helvetica, sans-serif
                    font-weight: 600
                    line-height: 16px
                    letter-spacing: 0.25px
                    white-space: nowrap
                    text-overflow: ellipsis
                    display: flex
                    span
                        flex: 1
                    button.add
                        width: 16px
                        height: 16px
                        margin-right: 2px

            .dm-channel
                display: flex
                align-items: center
                justify-content: space-between
                position: relative
                width: calc(#{$sidebar-width} - #{$btn-side-margin} * 2 - 16px)
                height: $btn-height
                margin: $btn-vertical-margin 0 $btn-vertical-margin $btn-side-margin
                padding: 0 8px
                border-radius: 4px //
                text-decoration: none
                white-space: nowrap

                .badge
                    margin-left: 8px
                    flex: 0 0 auto

                .title
                    display: block
                    margin: 0
                    font: 16px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                    font-weight: 500
                    line-height: 20px
                    white-space: nowrap
                    overflow: hidden
                    text-overflow: ellipsis
                    flex: 1 1 auto

                .subtitle
                    display: block
                    margin: -2px 0 0 0
                    font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                    font-weight: 500
                    line-height: 16px
                    white-space: nowrap
                    overflow: hidden
                    text-overflow: ellipsis

                .avatar
                    margin-right: 12px //
                    flex: 0 0 auto
                    &.wrapper
                        display: flex
                        align-items: center
                        justify-content: center
                        svg
                            width: 24px
                            height: 24px

                .content
                    flex: 1 1 auto
                    overflow: hidden
                    white-space: nowrap
                    text-overflow: ellipsis
                &:hover
                    .close
                        display: block
                button.close
                    width: 20px
                    height: 20px
                    opacity: 0.7
                    display: none
                    border-radius: 4px //
                    margin-left: 8px
                    flex: 0 0 auto
                    svg
                        width: 16px
                        height: 16px
                        margin: 2px
                        // ! TODO: path doesnt conform to size
                    &:hover
                        opacity: 1

        .media-control
            width: 100%
            flex: 0 0 auto
            z-index: 1
            &.in-vc .vc-control
                display: block

            .vc-control
                position: relative
                // overflow: visible
                display: none
                padding: 8px
                border-bottom-width: 1px
                border-bottom-style: solid

                .connection
                    padding: 0 0 4px 0
                    display: flex
                    align-items: center

                    .text
                        flex: 1
                        min-width: 0 // do not remove
                        .status
                            display: flex
                            align-items: center
                            margin: 0 0 2px 0
                            font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                            font-weight: 600
                            overflow: hidden
                            white-space: nowrap;
                            text-overflow: ellipsis;
                            &.connected
                                color: #4fdc7c
                            &.connecting
                            
                            &.disconnected
                                color: #ed4245
                            svg
                                width: 16px
                                height: 16px
                                margin: 0 4px 0 0
                                flex: 0 0 auto
                        
                        .subtitle
                            max-width: 100%
                            margin: 0
                            display: block
                            font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                            line-height: 13px
                            text-decoration: none
                            overflow: hidden
                            white-space: nowrap
                            text-overflow: ellipsis
                            cursor: pointer

                    button.disconnect
                        width: 32px
                        height: 32px
                        display: relative
                        flex: 0 0 auto
                        margin: 0 0 0 10px
                        border-radius: 4px
                        svg
                            width: 20px
                            height: 20px

                .actions
                    display: flex
                    align-items: center
                    justify-content: space-between
                    margin: 4px 0 0 0

                    button
                        width: auto
                        min-width: auto
                        height: 32px
                        display: flex
                        align-items: center
                        justify-content: center
                        flex: 1 1 auto
                        position: relative
                        padding: 2px 16px
                        border-radius: 3px
                        margin: 0 4px
                        font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                        font-weight: 500
                        line-height: 16px
                        transition: background-color .17s ease, color .17s ease
                        white-space: nowrap
                        text-overflow: ellipsis
                        overflow: hidden
                        &:first-child
                            margin-left: 0
                        &:last-child
                            margin-right: 0

                        svg
                            margin-right: 8px
                            flex-shrink: 0


            .content
                height: $media-ctrl-height
                display: flex
                align-items: center
                padding: 0 8px
                margin: 0 0 1px 0

                .avatar
                    margin: 0 8px 0 0

                .name
                    user-select: text
                    cursor: pointer
                    margin-right: 0 4px 0 0
                    flex-grow: 1
                    .title
                        display: block
                        margin: 0
                        font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                        font-weight: 600
                        line-height: 18px
                        overflow: hidden
                        white-space: nowrap
                        text-overflow: ellipsis
                    .subtitle
                        // height is 13
                        display: block
                        position: relative
                        margin: 0
                        font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                        font-weight: 500
                        line-height: 13px
                        overflow: hidden
                        white-space: nowrap
                        text-overflow: ellipsis
                        span
                            display: block
                            transition: top 0.22s ease
                            // TODO: transition does not work
                        .desc
                            position: relative
                        .tag
                            position: absolute
                &:hover .name .subtitle
                    .desc
                        top: -13px // depends on height
                    .tag
                        top: 0

                .control
                    flex: 0 1 auto
                    height: 32px
                    font-size: 0
                    button
                        width: 32px
                        height: 32px
                        aspect-ratio: 1
                        position: relative
                        border-radius: 4px
                        // display: flex
                        // align-items: center
                        // justify-content: center
                        svg
                            width: 20px
                            height: 20px
                            aspect-ratio: 1


    #main-content
        width: calc(100% - #{$sidebar-width})
        height: 100%
        display: flex
        flex-direction: column

        .head
            width: 100%
            height: $head-height
            flex: 0 0 auto
            display: flex
            align-items: center
            z-index: 2
            // position: relative
            padding: 0 8px
            box-sizing: border-box
            hr
                height: 24px
                flex: 0 0 auto
                margin: 0 8px

            .info
                display: flex
                align-items: center
                position: relative
                flex: 1 1 auto
                min-width: 0
                overflow: hidden
                cursor: default
                user-select: none
                &::after
                    content: ''
                    width: 8px
                    height: 100%
                    +abs-pos(0, auto, auto, 0)

                h3.header
                    display: flex
                    align-items: center
                    flex: 0 0 auto
                    margin: 0 8px 0 0
                    font: 16px Ginto, "Helvetica Neue", Helvetica, Arial, sans-serif
                    font-weight: 600
                    svg
                        flex: 0 0 auto
                        margin: 0 8px

                .tab-btns
                    display: flex
                    button
                        min-width: 40px
                        flex: 0 0 auto
                        display: flex
                        align-items: center
                        justify-content: center
                        position: relative
                        margin: 0 8px
                        padding: 2px 8px
                        border-radius: 4px
                        font: 16px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                        font-weight: 500
                        text-align: center
                        overflow: hidden
                        white-space: nowrap
                        text-overflow: ellipsis
                        &.active
                            cursor: default
                        .badge
                            margin: 0 0 0 8px
            #add-friend-btn // ? vs code thinks this is a button
                color: #fff
                background-color: #3ba55d
                &.active
                    color: #3ba55d

            .tools
                flex: 0 0 auto
                display: flex
                align-items: center
                button
                    margin: 0 8px
                    flex: 0 0 auto

        .content
            width: 100%
            height: calc(100% - #{$head-height})
            position: relative
            display: flex
            overflow: hidden
            transform: translateZ(0) // t?????????

            .chat
                flex: 1 1 auto
                display: flex
                flex-direction: column
                &[name="add-friend"] header
                    flex-shrink: 0
                    padding: 20px 30px
                    border-bottom-width: 1px
                    border-bottom-style: solid
                    .title, .subtitle
                        user-select: none
                        line-height: 20px
                    .title
                        margin: 0 0 8px 0
                        font: 16px Ginto, "Helvetica Neue", Helvetica, Arial, sans-serif
                        font-weight: 600
                        text-transform: uppercase
                    .subtitle
                        font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                        font-weight: 400
                        &.message
                            margin: 8px 0 0 0
                            strong
                                font-weight: 600
                        &.success
                            color: #4fdc7c
                        &.error
                            color: #ed4245

                    form
                        display: flex
                        align-items: center
                        position: relative
                        margin: 16px 0 0 0
                        padding: 0 16px
                        border-width: 1px
                        border-style: solid
                        border-radius: 8px
                        &:focus-within
                            border-color: #00aff4
                        &.success
                            border-color: #3ba55d
                        &.error
                            border-color: #ed4245
                        input
                            flex: 1 1 auto
                            z-index: 1
                            margin: 0 16px 0 0
                            padding: 16px 0
                            border: none
                            outline: 0
                            box-sizing: border-box
                        input, .input-overlay
                            font: 16px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                            font-weight: 500
                            line-height: 20px
                            letter-spacing: 0.04em
                            white-space: pre
                        .input-overlay
                            +abs-pos(auto, 16px, auto, auto)
                            padding: 16px 0
                            cursor: text
                            box-sizing: border-box
                        button
                            height: 32px
                            min-width: 60px
                            min-height: 32px
                            position: relative
                            padding: 2px 16px
                            border-radius: 3px
                            box-sizing: border-box
                            font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                            font-weight: 500
                            line-height: 16px
                            overflow: hidde
                            white-space: nowrap
                            text-overflow: ellipsis
                            user-select: none
                            transition: background-color 0.17s ease, color 0.17s ease
                            &:disabled
                                opacity: 0.5
                                cursor: not-allowed
                
                &[name="pending"], &[name="blocked"]
                    .scroller li.item
                        .user-info .name .subtitle
                            font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                            font-weight: 500
                            line-height: 20px
                        .actions button
                            &.accept:hover
                                color: #3ba55d
                            &.reject:hover
                                color: #ed4245

                .scroller
                    --margin-top: 8px
                    height: calc(100% - var(--margin-top))
                    min-height: 0
                    flex: 1 1 auto
                    position: relative
                    box-sizing: border-box
                    padding: 0 0 8px 0
                    margin: var(--margin-top) 0 0 0
                    overflow: hidden scroll
                    scrollbar-width: auto
                    &.empty
                        width: 100%
                        height: auto
                        display: flex
                        align-items: center
                        justify-content: center
                        margin: 0
                        padding: 0
                        overflow: hidden
                        .wrapper
                            max-width: 440px
                        img
                            flex: 0 1 auto
                            margin: 0 0 40px 0
                        .subtitle
                            flex: 0 1 auto
                            margin: 8px 0 0 0
                            font: 16px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                            font-weight: 400
                            line-height: 20px
                            text-align: center
                        button
                            height: 38px
                            min-width: 96px
                            position: relative
                            display: block
                            margin: 20px auto 0 auto
                            padding: 2px 16px
                            border-radius: 3px
                            box-sizing: border-box
                            font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                            font-weight: 500
                            line-height: 16px
                            user-select: none
                            transition: background-color 0.17s ease, color 0.17s ease

                    .header
                        margin: 16px 20px 8px 30px
                        font: 12px Ginto, "Helvetica Neue", Helvetica, Arial, sans-serif
                        font-weight: 600
                        line-height: 16px
                        letter-spacing: 0.25px
                        text-transform: uppercase

                    li.item
                        height: 62px
                        display: flex
                        align-items: center
                        justify-content: space-between
                        border-top-width: 1px
                        border-top-style: solid
                        margin: 0 20px 0 30px
                        box-sizing: border-box
                        // overflow: hidden
                        cursor: pointer
                        &:hover
                            border-radius: 8px
                            margin: 0 10px 0 20px
                            padding: 0 10px
                            // box-shadow: none
                            .user-info .name .title .tag
                                visibility: visible

                        .user-info
                            display: flex
                            overflow: hidden
                            flex-shrink: 0
                            .avatar
                                margin: 0 12px 0 0
                                pointer-events: none
                            .name
                                // display: flex
                                // flex-direction: column
                                .title
                                    display: flex
                                    align-items: flex-end
                                    justify-content: flex-start
                                    flex-grow: 1
                                    margin: 0
                                    font: 16px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                                    font-weight: 600
                                    .username
                                        flex: 0 1 auto
                                        overflow: hidden
                                        white-space: nowrap
                                        text-overflow: ellipsis
                                    .tag
                                        visibility: hidden
                                        font-size: 14px
                                        font-weight: 500
                                        line-height: 16px

                                .subtitle
                                    font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                                    font-weight: 500
                                    overflow: hidden
                                    white-space: nowrap
                                    text-overflow: ellipsis

                        .actions
                            display: flex
                            margin: 0 0 0 8px
                            button
                                width: 36px
                                height: 36px
                                display: flex
                                align-items: center
                                justify-content: center
                                border-radius: 50%
                                margin: 0 0 0 10px
                                &:first-child
                                    margin: 0

            #active-now
                min-width: 360px
                max-width: 420px
                flex: 0 1 30%
                .scroller
                    height: 100%
                    min-height: 0
                    position: relative
                    box-sizing: border-box
                    padding: 16px 8px 16px 16px
                    margin: 0 0 0 2px
                    border-left-width: 1px
                    border-left-style: solid
                    overflow: hidden scroll
                    scrollbar-width: thin
                    list-style: none
                    &.empty li.item.empty
                        display: block
                    .header
                        margin: 8px 0 16px
                        font: 20px Ginto, "Helvetica Neue", Helvetica, Arial, sans-serif
                        font-weight: 700
                        line-height: 24px

                    li.item
                        border-radius: 8px
                        padding: 16px
                        margin: 8px 0 0 0
                        cursor: pointer
                        user-select: none
                        &:first-child
                            margin: 0
                        &.spotify .body .wrapper .section-icon
                            mask: none
                        &.empty
                            display: none
                            text-align: center
                            cursor: default
                            .title
                                font: 16px Ginto, "Helvetica Neue", Helvetica, Arial, sans-serif
                                font-weight: 600
                                line-height: 20px
                                margin: 0 0 4px 0
                            .subtitle
                                font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                                font-weight: 400
                                line-height: 18px
                                padding: 0 
                        header
                            height: 36px
                            display: grid
                            grid-gap: 12px
                            grid-template-columns: 32px minmax(20px, auto) 24px
                            align-items: center
                            position: relative
                            svg.avatar
                                pointer-events: none
                            .title, .subtitle
                                overflow: hidden
                                white-space: nowrap
                                text-overflow: ellipsis
                            .title
                                font: 16px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                                font-weight: 600
                                line-height: 20px
                            .subtitle
                                font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                                font-weight: 400
                                line-height: 18px
                            .header-icon
                                width: 24px
                                height: 24px
                                aspect-ratio: 1
                                border-radius: 8px
                                justify-self: end
                        .body
                            display: grid
                            grid-gap: 12px
                            grid-template-columns: 32px minmax(20px, auto) max-content
                            align-items: start // TODO: center???
                            position: relative
                            padding: 12px
                            margin: 12px 0 0 0
                            border-radius: 8px
                            .section-icon
                                width: 32px
                                height: 32px
                                aspect-ratio: 1
                                border-radius: 4px
                                
                                mask-size: 100%
                                mask-type: luminance
                            .badge-wrapper
                                width: 16px
                                height: 16px
                                aspect-ratio: 1
                                display: flex
                                align-items: center
                                justify-content: center
                                +abs-pos(auto, auto, -2px, -2px)
                                border-radius: 50%
                                .icon-badge
                                    width: 16px
                                    height: 16px
                            .wrapper
                                width: 32px
                                height: 32px
                                position: relative
                                .section-icon
                                    mask: url(#user-status-small-mask)
                                &.server
                                    .section-icon
                                        border-radius: 50%
                                    .icon-badge
                                        width: 10px
                                        height: 10px
                            .name:hover a
                                text-decoration: underline
                            .title, .subtitle, .time-elapsed
                                overflow: hidden
                                white-space: nowrap
                                text-overflow: ellipsis
                                text-decoration: none
                            .title
                                display: block
                                font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                                font-weight: 600
                                line-height: 18px
                            .subtitle, .time-elapsed
                                display: block
                                font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
                                font-weight: 400
                                line-height: 16px
                            .users // TODO: FINISH ALL
                                height: 24px
                                display: flex
                                align-items: center
                                justify-content: flex-end
                                img
                                    width: 24px
                                    height: 24px
                                    aspect-ratio: 1
                                    border-radius: 50%
                                    mask: url(#users-list-item-mask)
                                    &:first-child
                                        margin: 0
                                    &:last-child
                                        mask: none
            
            #members-sidebar


            .tab
                display: none
                &.active
                    display: flex



button, a
    &[data-tooltip]::before
        font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
        font-weight: 500
        line-height: 16px

.tooltip
    max-width: 196px
    position: absolute
    border-radius: 5px
    padding: 8px 12px
    z-index: 10
    // font: 16px
    font-weight: 600
    line-height: 20px
    word-wrap: break-word
    // transform-origin: 0 50%
    .title
    
    .subtitle

    &::before
        $size: 5px
        content: ''
        width: 0
        height: 0
        position: absolute
        right: 100%
        top: 50%
        margin-top: -$size ////////
        border: $size solid transparent

        border-top-color: #000 //////// direction

    .direction
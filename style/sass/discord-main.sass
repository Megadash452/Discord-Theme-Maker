$top-bar-height: 22px // web: 0px

$server-list-width: 72px
$sidebar-width: 240px
$ping-color: #ed4245
    
=abs-pos($top, $left, $bottom:auto, $right:auto)
    position: absolute
    top: $top
    bottom: $bottom
    left: $left
    right: $right


// TODO: FONT: Whitney
// TODO: FONT: Ginto

body
    margin: 0
    width: 100vw
    
// * All colors can be changed by user

body.light
    color: #4f5660
    background-color: #e3e5e8
    
body.dark
    color: #b9bbbe
    background-color: #202225

    #guilds 
        .item.no-img, #home-btn
            > svg .wrapper
                color: #dcddde
                background-color: #36393f
            &:hover > svg .wrapper
                color: #fff
                background-color: #5865f2
            &:active > svg .wrapper, &.active > svg .wrapper
                color: #fff
                background-color: #5865f2
        .guild-actions
            background-color: #36393f
            

    #sidebar
        background-color: #2f3136
        .head
            background-color: #0000
        .channels
            color: #8e9297
            background-color: #0000
            .scroller
                scrollbar-color: transparent transparent
                &:hover
                    scrollbar-color: #202225 transparent
            h2.category
                color: inherit
                background-color: #0000
                &:hover
                    color: #dcddde
                    background-color: #0000
                &:active
                    color: #dcddde
                    background-color: #0000
            .dm-channel, .channel
                color: inherit
                background-color: #0000
                &:hover
                    color: #dcddde
                    background-color: #4f545c29
                &:active, &.active
                    color: #fff
                    background-color: #4f545c52
                &.muted
                    color: #4f545c
                    background-color: #0000
                    &:hover
                        color: #dcddde
                        background-color: #4f545c29
                    &:active, &.active
                        color: #fff
                        background-color: #4f545c52
                    .avatar
                        opacity: 0.3
                .avatar
                    color: inherit
                    background-color: #0000
            button
                color: #8e9297
                background-color: #0000
                &:hover
                    color: #dcddde
                    background-color: #0000
                &:active
                    color: #dcddde
                    background-color: #0000

        .media-control
            color: #dcddde
            background-color: #292b2f
            .vc-control
                color: #fff
                background-color: #0000
                border-bottom-color: #ffffff0f
                .connection
                    color: inherit
                    background-color: #0000
                    .subtitle
                        color: #b9bbbe
                        background-color: #0000
                    button.disconnect
                        color: #b9bbbe
                        background-color: #0000
                        &:hover
                            color: #dcddde
                            background-color: #4f545c52
                        &:active
                            color: #dcddde
                            background-color: #4f545c52
                .actions button
                    color: #fff
                    background-color: #36393f
                    &:hover
                        color: #fff
                        background-color: #2f3136
                    &:active
                        color: #fff
                        background-color: #2f3136
            .content
                .title
                    color: #fff
                .subtitle
                    color: #b9bbbe
                button
                    color: #b9bbbe
                    background-color: #0000
                    &:hover
                        color: #dcddde
                        background-color: #4f545c52
                    &:active
                        color: #dcddde
                        background-color: #4f545c52

    .search-bar
        color: #72767d
        background-color: #202225
        &:hover
            color: #72767d
            background-color: #202225
        &:active
            color: #72767d
            background-color: #202225

    #main-content
        background-color: #36393f
        .head
            background-color: #00000000

    .tooltip, .tooltip::before
        color: #dcddde
        background-color: #18191c
        border-color: #18191c
            


.badge
    text-align: center
    font-size: 12px
    font-family: Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
    font-weight: 600
    box-sizing: border-box
    line-height: 16px
    width: 16px
    height: 16px
    border-radius: 8px
    background: $ping-color
    display: flex
    align-items: center
    justify-content: center
    color: #fff

.avatar
    width: 32px //
    height: 32px //
    aspect-ratio: 1
    position: relative
    border-radius: 50%
    img
        width: 100%
        height: 100%
        object-fit: cover
    *
        max-width: 100%
        max-height: 100%


#top-bar
    width: 100%
    height: #{$top-bar-height}
    *
        max-height: #{$top-bar-height}


#main-wrapper
    height: calc(100vh - #{$top-bar-height}) //
    display: flex

    
#guilds
    width: $server-list-width
    height: 100%
    position: relative
    overflow: hidden

    > .scroller
        height: 100%
        width: 100%
        overflow-y: scroll
        overflow-x: hidden
        // TODO: options for user to put a scroller of their liking (cannot be larger than the margin in server icons)
        scrollbar-width: none //

    #home-btn
        margin-top: 4px // web is 12px
        > svg svg
            padding-top: 14px

    li, .item
        $icon-size: 48px // width & height
        $icon-spacing: 8px

        $border-rad: 50%
        $border-rad-hov: 17.5px
        $border-rad-active: $border-rad-hov

        $side-margins: calc((#{$server-list-width} - #{$icon-size}) / 2)

        width: $icon-size
        height: $icon-size
        aspect-ratio: 1
        position: relative
        margin: 0 auto $icon-spacing $side-margins
        list-style-type: none
        cursor: pointer
        border-radius: $border-rad
        transition: border-radius 0.2s ease-out // 0.15s
        // TODO: get accurate time for border-radius

        > svg
            width: $icon-size
            aspect-ratio: 1
            border-radius: inherit
            overflow: hidden
            transition: background-color 0.15s ease-out, color 0.15s ease-out
            .wrapper
                width: 100%
                height: 100%
            svg
                display: block
                margin-left: auto
                margin-right: auto

        &::before // pill
            --left: calc(-1 * (#{$server-list-width} - #{$icon-size}) / 2)
            content: ''
            background-color: #fff
            +abs-pos(50%, calc(var(--left) - 8px), auto, auto)
            transform: translateY(-50%)
            width: 8px // 
            height: 8px // unreads: 8px, hover: 20px, active: 40px
            border-radius: 0 4px 4px 0
            transition: height 0.2s, left 0.1s // TODO: get accurate time
        &:hover
            border-radius: $border-rad-hov
            &::before
                height: 20px
                left: calc(var(--left) - 4px)
        &.unreads::before, &.unread::before
            left: calc(var(--left) - 4px)
        &:active, &.active
            border-radius: $border-rad-active
            &::before
                height: 40px
                left: calc(var(--left) - 4px)
        
        &.guild-actions
            display: flex
            align-items: center
            justify-content: center
            color: #3ba55d
            &:hover, &:active, &.active
                color: #fff
                background-color: #3ba55d

        &.no-img .wrapper // * (childWrapper-anI2G9 acronym-2mOFsV) inside svg foreignObject when Compiling
            font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif
            font-weight: 500
            line-height: 1.2em
            white-space: nowrap
            display: flex
            align-items: center
            justify-content: center

        .badge
            +abs-pos(auto, auto, 50%, 0)
            pointer-events: none
            // padding-right: 1px
            &.upper
                top: 0
                bottom: auto
                background: #3ba55d
            &.lower
                top: auto
                bottom: 0
                background: $ping-color

    hr, .divider
        margin: 0 auto 8px auto
        border: none
        width: 32px //
        height: 2px
        border-radius: 1px
        background-color: #ffffff0f


    $new-width: 56px
    $new-height: 24px
    $new-margin: 8px
    &::before, &::after
        +abs-pos(-#{$new-height + $new-margin}, 0, auto, 0)
        // width: 3.5rem //
        // height: 1.5rem //
        max-height: $new-height //
        padding: 0.281rem 0 0.281rem 0
        margin: $new-margin
        border-radius: 50px
        z-index: 2

        content: 'NEW'
        opacity: 0.9
        background: $ping-color
        color: #fff //
        font: 0.75rem Ginto, "Helvetica Neue", Helvetica, sans-serif // ginto is proprietarial
        text-align: center
        
        font-weight: 600
        cursor: pointer
        // ! Vertically center using css method instead of padding
        
        --scale: 1 // * make user choose wether they want it to grow or to move // 0
        transition: transform 0.05s, top 0.05s, bottom 0.05s
        transform: scale(var(--scale, 1))
        transform-origin: top center

        &:hover
            opacity: 1
            background: yellow
    &::after
        top: auto
        bottom: -#{$new-height + $new-margin}
        transform-origin: bottom center
    &.new-above::before
        --scale: 1
        top: 0
    &.new-below::after
        --scale: 1
        bottom: 0

button
    background: transparent
    border: none
    padding: 0
    margin: 0
    cursor: pointer


#app-base
    height: calc(100vh - #{$top-bar-height})
    width: calc(100vw - #{$server-list-width})
    display: flex

    $head-height: 48px //
    $media-ctrl-height: 52px //

    &::before
        content: ''
        height: 1px
        display: block
        +abs-pos(calc(#{$head-height} + #{$top-bar-height} - 1px), $server-list-width, auto, 0)
        pointer-events: none
        box-shadow: 0 1px 0 #04040533, 0 1.5px 0 #0606070d, 0 2px 0 #0404050d

    #sidebar
        width: $sidebar-width
        height: 100%
        border-radius: 8px 0 0 0 //
        overflow-y: hidden
        display: flex
        flex-direction: column

        .head
            width: 100%
            height: $head-height
            display: flex
            flex: 0 0 auto
            align-items: center
            justify-content: center
            
            #search-dms
                width: 220px //
                height: 28px //
                border: none
                border-radius: 4px //
                padding: 1px 6px
                font: 14px Whitney, "Helvetica Neue", Helvetica, sans-serif
                font-weight: 500
                line-height: 24px
                text-align: left //
                cursor: pointer

        .channels
            width: 100%
            // height: calc(100% - #{$head-height} - #{$media-ctrl-height})
            flex: 1 1 auto
            position: relative
            overflow-y: hidden
            user-select: none

            $btn-side-margin: 8px //
            $btn-vertical-margin: 1px //
            $btn-height: 42px //

            .scroller
                height: 100%
                padding-top: 8px //
                padding-right: 8px
                position: relative
                overflow-x: visible
                overflow-y: auto
                scrollbar-width: thin
                transition: scrollbar-color 0.15s
                &:hover
                    scrollbar-color: #202225 transparent

                .category
                    height: 18px
                    width: calc(#{$sidebar-width} - #{$btn-side-margin} * 2 - 18px)
                    margin: 18px 8px 4px 18px
                    border-radius: 4px
                    box-sizing: border-box
                    font: 12px Ginto, "Helvetica Neue", Helvetica, sans-serif
                    font-weight: 600
                    line-height: 16px
                    letter-spacing: 0.25px
                    white-space: nowrap
                    text-overflow: ellipsis
                    display: flex
                    span
                        flex: 1
                    button.add
                        width: 16px
                        height: 16px
                        margin-right: 2px

            .dm-channel
                display: flex
                align-items: center
                justify-content: space-between
                position: relative
                width: calc(#{$sidebar-width} - #{$btn-side-margin} * 2 - 16px)
                height: $btn-height
                margin: $btn-vertical-margin 0 $btn-vertical-margin $btn-side-margin
                padding: 0 8px
                border-radius: 4px //
                text-decoration: none
                white-space: nowrap

                .badge
                    margin-left: 8px
                    flex: 0 0 auto

                .title
                    display: block
                    margin: 0
                    font: 16px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                    font-weight: 500
                    line-height: 20px
                    white-space: nowrap
                    overflow: hidden
                    text-overflow: ellipsis
                    flex: 1 1 auto

                .subtitle
                    display: block
                    margin: -2px 0 0 0
                    font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                    font-weight: 500
                    line-height: 16px
                    white-space: nowrap
                    overflow: hidden
                    text-overflow: ellipsis

                .avatar
                    margin-right: 12px //
                    flex: 0 0 auto
                    &.wrapper
                        display: flex
                        align-items: center
                        justify-content: center
                        svg
                            width: 24px
                            height: 24px

                .content
                    flex: 1 1 auto
                    overflow: hidden
                    white-space: nowrap
                    text-overflow: ellipsis
                &:hover
                    .close
                        display: block
                button.close
                    width: 20px
                    height: 20px
                    opacity: 0.7
                    display: none
                    border-radius: 4px //
                    margin-left: 8px
                    flex: 0 0 auto
                    svg
                        width: 16px
                        height: 16px
                        margin: 2px
                        // ! TODO: path doesnt conform to size
                    &:hover
                        opacity: 1

        .media-control
            width: 100%
            flex: 0 0 auto
            z-index: 1
            &.in-vc .vc-control
                display: block

            .vc-control
                position: relative
                // overflow: visible
                display: none
                padding: 8px
                border-bottom-width: 1px
                border-bottom-style: solid

                .connection
                    padding: 0 0 4px 0
                    display: flex
                    align-items: center

                    .text
                        flex: 1
                        min-width: 0 // do not remove
                        .status
                            display: flex
                            align-items: center
                            margin: 0 0 2px 0
                            font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                            font-weight: 600
                            overflow: hidden
                            white-space: nowrap;
                            text-overflow: ellipsis;
                            &.connected
                                color: #4fdc7c
                            &.connecting
                            
                            &.disconnected
                                color: #ed4245
                            svg
                                width: 16px
                                height: 16px
                                margin: 0 4px 0 0
                                flex: 0 0 auto
                        
                        .subtitle
                            max-width: 100%
                            margin: 0
                            display: block
                            font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                            line-height: 13px
                            text-decoration: none
                            overflow: hidden
                            white-space: nowrap
                            text-overflow: ellipsis
                            cursor: pointer

                    button.disconnect
                        width: 32px
                        height: 32px
                        display: relative
                        flex: 0 0 auto
                        margin: 0 0 0 10px
                        border-radius: 4px
                        svg
                            width: 20px
                            height: 20px

                .actions
                    display: flex
                    align-items: center
                    justify-content: space-between
                    margin: 4px 0 0 0

                    button
                        width: auto
                        min-width: auto
                        height: 32px
                        display: flex
                        align-items: center
                        justify-content: center
                        flex: 1 1 auto
                        position: relative
                        padding: 2px 16px
                        border-radius: 3px
                        margin: 0 4px
                        font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                        font-weight: 500
                        line-height: 16px
                        transition: background-color .17s ease, color .17s ease
                        white-space: nowrap
                        text-overflow: ellipsis
                        overflow: hidden
                        &:first-child
                            margin-left: 0
                        &:last-child
                            margin-right: 0
                        // TODO: continue

                        svg
                            margin-right: 8px
                            flex-shrink: 0


            .content // TODO: &:hover show tag
                height: $media-ctrl-height
                display: flex
                align-items: center
                padding: 0 8px
                margin: 0 0 1px 0

                .avatar
                    margin: 0 8px 0 0

                .name
                    user-select: text
                    cursor: pointer
                    margin-right: 0 4px 0 0
                    flex-grow: 1
                    .title
                        display: block
                        margin: 0
                        font: 14px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                        font-weight: 600
                        line-height: 18px
                        overflow: hidden
                        white-space: nowrap
                        text-overflow: ellipsis
                    .subtitle
                        // height is 13
                        display: block
                        position: relative
                        margin: 0
                        font: 12px Whitney, "Helvetica Neue", Helvetica, Arial, sans-serif //
                        font-weight: 500
                        line-height: 13px
                        overflow: hidden
                        white-space: nowrap
                        text-overflow: ellipsis
                        span
                            display: block
                            transition: top 0.22s ease
                            // TODO: transition does not work
                        .desc
                            position: relative
                        .tag
                            position: absolute
                &:hover .name .subtitle
                    .desc
                        top: -13px // depends on height
                    .tag
                        top: 0

                .control
                    flex: 0 1 auto
                    height: 32px
                    font-size: 0
                    button
                        width: 32px
                        height: 32px
                        aspect-ratio: 1
                        position: relative
                        border-radius: 4px
                        // display: flex
                        // align-items: center
                        // justify-content: center
                        svg
                            width: 20px
                            height: 20px
                            aspect-ratio: 1


    #main-content
        width: calc(100% - #{$sidebar-width})
        height: 100%

        .head
            width: 100%
            height: $head-height
        .chat
            width: 100%
            height: calc(100% - #{$head-height})


.tooltip
    max-width: 196px
    position: absolute
    border-radius: 5px
    padding: 8px 12px
    z-index: 10
    font: 16px
    font-weight: 600
    line-height: 20px
    word-wrap: break-word
    // transform-origin: 0 50%
    .title
    
    .subtitle

    &::before
        $size: 5px
        content: ''
        width: 0
        height: 0
        position: absolute
        right: 100%
        top: 50%
        margin-top: -$size ////////
        border: $size solid transparent

        border-top-color: #000 //////// direction

    .direction